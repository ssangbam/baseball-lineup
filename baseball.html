<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>야구 라인업 및 포지션 시각화</title>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; margin: 40px; display: flex; justify-content: space-between; }
        h2, h3 { color: #2c3e50; }
        .table-container { width: 45%; }
        table { border-collapse: collapse; width: 100%; min-width: 320px; margin: 20px 0; }
        th, td { border: 1px solid #aaa; padding: 4px 7px; text-align: center; font-size: 14px; }
        th { background: #e2e2e2; }
        input, select, button { padding: 3px; font-size: 13px; }
        .small-input { width: 50px; }
        .side-select { width: 40px; }
        .mid-relief, .bench-player { margin-top: 3px; }
        .field-container { width: 500px; height: 500px; text-align: center; position: relative; }
        .field-container img { width: 500px; height: 500px; display: block; }
        .position-label {
            position: absolute;
            font-size: 14px;
            font-weight: bold;
            background: rgba(255,255,255,0.85);
            border-radius: 5px;
            padding: 2px 7px;
            pointer-events: none;
            transform: translate(-50%, -50%);
            white-space: nowrap;
        }
        .pos-포수      { left: 250px; top: 460px; }
        .pos-1루수     { left: 350px; top: 320px; }
        .pos-2루수     { left: 315px; top: 240px; }
        .pos-3루수     { left: 150px; top: 320px; }
        .pos-유격수    { left: 185px; top: 240px; }
        .pos-좌익수    { left: 80px;  top: 160px; }
        .pos-중견수    { left: 250px; top: 120px; }
        .pos-우익수    { left: 420px; top: 160px; }
        .pos-지명타자  { left: 420px; top: 460px; }
        .pos-투수      { left: 250px; top: 330px; background: #fffbe0; border: 2px solid #ffd600; }
        .starter-today { background: #fffbe0 !important; border: 2px solid #ffd600 !important; }
        .starter-btn { cursor:pointer; }
    </style>
</head>
<body>
    <div class="field-container">
        <img src="baseball_field.jpg" alt="야구 경기장">
        <div class="position-label pos-포수" id="label-포수"></div>
        <div class="position-label pos-1루수" id="label-1루수"></div>
        <div class="position-label pos-2루수" id="label-2루수"></div>
        <div class="position-label pos-3루수" id="label-3루수"></div>
        <div class="position-label pos-유격수" id="label-유격수"></div>
        <div class="position-label pos-좌익수" id="label-좌익수"></div>
        <div class="position-label pos-중견수" id="label-중견수"></div>
        <div class="position-label pos-우익수" id="label-우익수"></div>
        <div class="position-label pos-지명타자" id="label-지명타자"></div>
        <div class="position-label pos-투수" id="label-투수"></div>
    </div>
    <div class="table-container">
        <h2>야구 라인업 짜기</h2>
        <!-- 타자 라인업 -->
        <h3>타순 라인업</h3>
        <form id="lineupForm">
            <table>
                <thead>
                    <tr>
                        <th>타순</th>
                        <th>선수 이름 / 좌우 / 포지션</th>
                    </tr>
                </thead>
                <tbody id="battersTableBody">
                    <!-- 1~9번 타순 행이 JS에서 생성됩니다 -->
                </tbody>
            </table>
        </form>
        <!-- 대기선수 명단 -->
        <h3>대기선수 명단 <button type="button" onclick="addBenchPlayer()">+ 추가</button></h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                </tr>
            </thead>
            <tbody id="benchPlayersBody">
                <!-- 벤치 플레이어 목록 -->
            </tbody>
        </table>
        <!-- 투수진 -->
        <h3>투수진</h3>
        <form id="pitcherForm">
            <table>
                <thead>
                    <tr>
                        <th>구분</th>
                        <th>선수 이름 / 좌우<br><span style="font-weight:normal;font-size:12px;">(누르면 오늘 선발)</span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1선발</td>
                        <td>
                            <input type="text" id="starter1" placeholder="선수 이름" class="small-input">
                            <select id="starter1-side" class="side-select">
                                <option value="">좌/우</option>
                                <option value="좌">좌</option>
                                <option value="우">우</option>
                            </select>
                            <button type="button" class="starter-btn" onclick="setTodayStarter(1)">오늘 선발</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2선발</td>
                        <td>
                            <input type="text" id="starter2" placeholder="선수 이름" class="small-input">
                            <select id="starter2-side" class="side-select">
                                <option value="">좌/우</option>
                                <option value="좌">좌</option>
                                <option value="우">우</option>
                            </select>
                            <button type="button" class="starter-btn" onclick="setTodayStarter(2)">오늘 선발</button>
                        </td>
                    </tr>
                    <tr>
                        <td>3선발</td>
                        <td>
                            <input type="text" id="starter3" placeholder="선수 이름" class="small-input">
                            <select id="starter3-side" class="side-select">
                                <option value="">좌/우</option>
                                <option value="좌">좌</option>
                                <option value="우">우</option>
                            </select>
                            <button type="button" class="starter-btn" onclick="setTodayStarter(3)">오늘 선발</button>
                        </td>
                    </tr>
                    <tr>
                        <td>4선발</td>
                        <td>
                            <input type="text" id="starter4" placeholder="선수 이름" class="small-input">
                            <select id="starter4-side" class="side-select">
                                <option value="">좌/우</option>
                                <option value="좌">좌</option>
                                <option value="우">우</option>
                            </select>
                            <button type="button" class="starter-btn" onclick="setTodayStarter(4)">오늘 선발</button>
                        </td>
                    </tr>
                    <tr>
                        <td>5선발</td>
                        <td>
                            <input type="text" id="starter5" placeholder="선수 이름" class="small-input">
                            <select id="starter5-side" class="side-select">
                                <option value="">좌/우</option>
                                <option value="좌">좌</option>
                                <option value="우">우</option>
                            </select>
                            <button type="button" class="starter-btn" onclick="setTodayStarter(5)">오늘 선발</button>
                        </td>
                    </tr>
                    <tr>
                        <td style="vertical-align:top; background:#f6f6f6;">
                            중간계투<br>
                            <button type="button" onclick="addMidRelief()">+ 추가</button>
                        </td>
                        <td id="midReliefContainer">
                            <!-- 중간계투 입력칸이 여기에 들어감 -->
                        </td>
                    </tr>
                    <tr>
                        <td>마무리투수</td>
                        <td>
                            <input type="text" id="closer" placeholder="선수 이름" class="small-input">
                            <select id="closer-side" class="side-select">
                                <option value="">좌/우</option>
                                <option value="좌">좌</option>
                                <option value="우">우</option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
    <script>
        // 타자 포지션 배열
        const positions = [
            "포수", "1루수", "2루수", "3루수", "유격수",
            "좌익수", "중견수", "우익수", "지명타자"
        ];

        // 타자 라인업 테이블 생성
        function createBattersTable() {
            let html = '';
            for(let i = 1; i <= 9; i++) {
                html += `<tr>
                    <td>${i}번</td>
                    <td>
                        <input type="text" name="batter${i}" placeholder="선수 이름" class="small-input" oninput="updateFieldLabels()">
                        <select name="side${i}" class="side-select" onchange="updateFieldLabels()">
                            <option value="">좌/우</option>
                            <option value="좌">좌</option>
                            <option value="우">우</option>
                        </select>
                        <select name="position${i}" onchange="updateFieldLabels()">
                            <option value="">포지션 선택</option>
                            ${positions.map(pos => `<option>${pos}</option>`).join('')}
                        </select>
                    </td>
                </tr>`;
            }
            document.getElementById('battersTableBody').innerHTML = html;
        }

        // 대기선수 명단 함수
        function addBenchPlayer() {
            const tbody = document.getElementById('benchPlayersBody');
            const tr = document.createElement('tr');
            const tdName = document.createElement('td');
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = '선수 이름';
            input.className = 'bench-player small-input';
            tdName.appendChild(input);

            const delBtn = document.createElement('button');
            delBtn.type = 'button';
            delBtn.innerText = '삭제';
            delBtn.onclick = function() {
                tbody.removeChild(tr);
            };
            tdName.appendChild(delBtn);

            tr.appendChild(tdName);
            tbody.appendChild(tr);
        }

        // 중간계투 추가 함수
        function addMidRelief() {
            const container = document.getElementById('midReliefContainer');
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = '선수 이름';
            input.className = 'mid-relief small-input';

            const sideSel = document.createElement('select');
            sideSel.className = 'side-select';
            sideSel.innerHTML = `
                <option value="">좌/우</option>
                <option value="좌">좌</option>
                <option value="우">우</option>
            `;

            const delBtn = document.createElement('button');
            delBtn.innerText = '삭제';
            delBtn.type = 'button';
            delBtn.style.marginLeft = '4px';
            delBtn.onclick = function() {
                container.removeChild(div);
            };

            const div = document.createElement('div');
            div.appendChild(input);
            div.appendChild(sideSel);
            div.appendChild(delBtn);
            container.appendChild(div);
        }

        // 오늘 선발투수 관련 변수
        let todayStarterNum = null; // 1~5

        // 오늘 선발투수 지정 함수
        function setTodayStarter(num) {
            todayStarterNum = num;
            updateStarterHighlight();
            updatePitcherOnField();
        }

        // 선발 버튼 강조
        function updateStarterHighlight() {
            for(let i=1; i<=5; i++) {
                const input = document.getElementById('starter'+i);
                if(i === todayStarterNum) {
                    input.classList.add('starter-today');
                } else {
                    input.classList.remove('starter-today');
                }
            }
        }

        // 야구장 투수 위치에 오늘 선발 이름만 표시 (좌/우 표시 X)
        function updatePitcherOnField() {
            let name = '';
            if(todayStarterNum) {
                const input = document.getElementById('starter'+todayStarterNum);
                if(input.value) {
                    name = input.value;
                }
            }
            document.getElementById('label-투수').innerText = name;
        }

        // 타자 포지션별로 입력된 선수 이름을 야구장에 표시 (좌/우 없이)
        function updateFieldLabels() {
            positions.forEach(pos => {
                document.getElementById('label-' + pos).innerText = '';
            });
            for(let i = 1; i <= 9; i++) {
                const name = document.querySelector(`input[name="batter${i}"]`).value;
                const pos = document.querySelector(`select[name="position${i}"]`).value;
                if(name && pos) {
                    document.getElementById('label-' + pos).innerText = name;
                }
            }
            // 투수 이름도 갱신
            updatePitcherOnField();
        }

        // 투수 입력이 바뀔 때도 야구장에 갱신
        function addStarterInputListeners() {
            for(let i=1; i<=5; i++) {
                document.getElementById('starter'+i).addEventListener('input', function() {
                    if(todayStarterNum === i) updatePitcherOnField();
                });
                document.getElementById('starter'+i+'-side').addEventListener('change', function() {
                    if(todayStarterNum === i) updatePitcherOnField();
                });
            }
        }

        window.onload = function() {
            createBattersTable();
            addStarterInputListeners();
        }
    </script>
</body>
</html>
